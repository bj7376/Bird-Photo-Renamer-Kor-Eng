## AI 조류 사진 자동 분류 프로그램 v2.0 패치노트

### 릴리즈 날짜: 2025년 6월 19일

AI 조류 사진 자동 분류 프로그램 v2.0이 출시되었습니다. 이번 업데이트는 사용자 경험을 대폭 개선하고, 특히 **시각적 리포트 생성 기능** 및 **AI 모델 활용**에 있어 강력한 새 기능을 추가하는 데 중점을 두었습니다.

---

### ✨ 주요 변경 사항 및 개선점

**1. 시각적 리포트 생성 기능 (`visual_report.py` 추가 및 개선)**
   * **다양한 출력 형식**: 조류 관찰 데이터를 기반으로 `HTML` 또는 `Word(.docx)` 형식의 시각적 리포트 생성을 지원합니다. 사용자는 필요에 따라 `없음`, `HTML`, `Word`, `둘 다` 중 선택하여 출력할 수 있습니다.
   * **크롭 이미지 활용**:
     * 식별된 조류의 크롭 이미지를 리포트에 포함시킬 수 있습니다.
     * `crop_dir` (기본값: `[출력 폴더]/cropped_images`)에 크롭된 이미지가 정리되어 저장되며, 리포트 생성 시 해당 이미지를 활용합니다.
     * 시각적 리포트 생성을 위해서는 크롭 이미지 저장이 필수적으로 연동됩니다.
   * **썸네일 크기 조절**: 리포트에 삽입되는 이미지의 썸네일 크기를 `small` (150x150), `medium` (250x250), `large` (400x400) 중 선택하여 용도에 맞게 조절할 수 있습니다.
   * **보고서 구조 개선**:
     * 관찰 요약(총 관찰 건수, 종수, 과수, 목수) 섹션이 추가되어 전체적인 관찰 내용을 한눈에 파악할 수 있습니다.
     * 종별 섹션에서 각 조류의 한국어명, 영문명, 학명, 목(Order), 과(Family) 정보와 함께 개별 관찰 기록(크롭 이미지, 시간)이 체계적으로 나열됩니다.
     * 분류학적 순서(목 -> 과)에 따라 종 목록이 자동 정렬되어 전문적인 보고서 형태를 갖춥니다.
   * **이미지 처리 개선**: `image_to_base64` 함수를 통해 이미지를 Base64로 인코딩하여 HTML에 직접 임베딩하며, EXIF 방향 정보를 처리하여 이미지 회전을 자동으로 보정합니다.
   * **시간 정보 통합 관리**: `get_observation_time_info` 함수를 통해 여러 날에 걸친 관찰 기록의 시작/종료 시간을 통합하여 보고서에 표시합니다.
   * **한글 폰트 지원 강화**: Word 문서 생성 시 `python-docx` 라이브러리를 활용, `set_korean_font` 유틸리티 함수를 통해 Windows, macOS, Linux 환경에서 `맑은 고딕`, `Apple SD Gothic Neo`, `Noto Sans CJK KR` 등 적절한 한글 폰트가 자동 적용되도록 폴백 기능을 구현하여 한글 깨짐 문제를 해결했습니다.

**2. AI 모델 및 API 활용 개선**
   * **🔥 프리미엄 모드 (실험실) 기능 추가**:
     * Google Gemini 2.5 Pro 모델을 활용한 조류 식별 옵션이 추가되었습니다.
     * 이 모드는 초보 탐조인 수준의 '현저하게 향상된 성능의 조류 식별'을 목표로 하며, '단일 이미지를 이용한 API 이용 비용 절감' 을 통해 최적화된 처리를 제공합니다.
     * **주의**: 프리미엄 모드는 Google Cloud의 유료 계정 및 별도의 API 키를 요구하며, 이미지 처리당 비용이 발생합니다(약 $0.00125-$0.005). 현재 개발 중인 기능이며, 이미지 처리 속도가 일반 모드 대비 다소 느린 편입니다.

**3. 사용자 인터페이스 (UI) 및 사용자 경험 (UX) 개선**
   * **스크롤 가능한 설정 섹션**: 사이드바의 설정 영역이 `CTkScrollableFrame`으로 변경되어, 창 크기에 관계없이 모든 설정 옵션이 스크롤을 통해 접근 가능합니다.
   * **프리미엄 모드 섹션 토글 기능**:
     * '프리미엄 모드 (실험실)' 섹션이 기본적으로 접힌 상태로 표시됩니다.
     * 섹션 제목 클릭 시 내용을 확장하거나 축소할 수 있어 인터페이스의 깔끔함과 공간 활용성을 높였습니다.
     * 접힌 상태에서도 주황색 배경색과 제목이 유지되어 섹션의 존재를 명확히 인지할 수 있습니다.
   * **초기 설정값 제공**: '촬영 지역' 입력 필드에 기본값으로 "South Korea"가 미리 입력되어 사용자 편의성을 증대했습니다.
   * **API 키 저장 및 불러오기 기능이 개선**: 키 관리가 더욱 편리해졌습니다. [Information from original code before modification]

---

### 🛠️ 버그 수정 및 안정화

* `AttributeError: '_tkinter.tkapp' object has no attribute 'model_var'` 오류 수정: `model_var` 변수가 라디오 버튼 생성 이전에 올바르게 초기화되도록 수정했습니다.
* `toggle_premium_section` 함수 내 위젯 재배치 로직을 개선하여 레이아웃 오류를 방지하고 안정성을 확보했습니다.
* **리소스 로딩 및 초기화**: `app_models` 등의 내부 리소스 초기화 시점을 최적화하고, `status_label` 및 `log_textbox`와 같은 UI 요소의 존재 여부를 확인하는 방어 코드를 추가하여 안정성을 높였습니다.

---

### 📝 기타 변경 사항

* 프로그램 설명 및 API 키 발급 안내가 최신 기능과 정책에 맞춰 업데이트되었습니다.
* 내부 코드 리팩토링 및 주석 추가를 통해 가독성과 유지보수성을 향상시켰습니다. [No direct citation in provided files, inferred from code refactoring task]

---

저희 AI 조류 사진 자동 분류 프로그램 v2.0에 많은 관심 부탁드리며, 앞으로도 사용자분들의 피드백을 반영하여 지속적으로 발전하는 프로그램을 만들겠습니다. 감사합니다!